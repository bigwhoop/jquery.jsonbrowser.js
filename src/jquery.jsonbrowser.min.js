// jquery.jsonbrowser.js | (c) Philippe Gerber <philippe@bigwhoop.ch | https://raw.github.com/bigwhoop/jquery.jsonbrowser.js/master/LICENSE
$.jsonbrowser={collapsibleClass:"collapsible",collapsedClass:"collapsed",collapseAll:function(e){var t=$(e);t.find("."+this.collapsibleClass+" > ul").addClass(this.collapsedClass)},expandAll:function(e){var t=$(e);t.find("."+this.collapsibleClass+" > ul").removeClass(this.collapsedClass)},showAll:function(e){var t=$(e);t.find("li").show()},hideAll:function(e){var t=$(e);t.find("li").hide()},search:function(e,t){$.jsonbrowser.showAll(e);if(typeof t!="string"||t.length==0){return}t=t.toLocaleLowerCase();var n=$(e);var r=function(e,t,n){if(t.length==n){return}e.find("> ul").children("li").each(function(){var e=t[n];var i=$(this);if(e=="*"||i.find("> .key").text().toLocaleLowerCase().indexOf(e)>-1){r(i,t,n+1)}else{i.hide()}})};if(t.indexOf(".")==0){var i=t.split(".").filter(function(e){return e!=""});r(n,i,0);return}$.jsonbrowser.hideAll(e);var s=function(){return $(this).text().toLocaleLowerCase().indexOf(t)>-1};n.find(".value").filter(s).parents("li").show()}};$.fn.jsonbrowser=function(e,t){function o(e,t){var n=$("<ul></ul>");for(var i in t){var s='<span class="key">'+i+":</span>",u=t[i],a=$("<li></li>");if(typeof u=="object"){if(u===null){a.append(s+' <span class="value empty-value">null</span>')}else if($.isArray(u)&&!u.length){a.append(s+' <span class="value empty-value">[]</span>')}else if(Object.keys(u).length==0){a.append(s+' <span class="value empty-value">{}</span>')}else{a.append(s+" "+($.isArray(u)?"[":"{"));o(a,u);a.append($.isArray(u)?"]":"}");if(r.collapsible){a.addClass($.jsonbrowser.collapsibleClass);a.on("click","> .key",function(){$(this).parent().children("ul").toggleClass($.jsonbrowser.collapsedClass)});if(r.collapsed){a.children("ul").addClass($.jsonbrowser.collapsedClass)}}}}else{var f=$("<div>").text(u).html();var l=$('<span class="value"></span>');if(f===""){l.addClass("empty-value").text('""')}else if(f==0){l.addClass("empty-value").text("0")}else{if(r.parseURLs){if(0===f.indexOf("http://")||0===f.indexOf("https://")){f=$('<a href="'+f+'" target="_blank">'+f+"</a>")}else if(0===f.indexOf("//")){f=$('<a href="'+r.scheme+":"+f+'" target="_blank">'+f+"</a>")}}if(typeof f=="string"&&!$.isNumeric(f)){f='"'+f+'"'}l.html(f)}a.append(s+" ");a.append(l)}a.append(",");n.append(a)}e.append(n)}var n={scheme:"http",parseURLs:true,collapsible:true,collapsed:false};var r=$.extend(n,t);var i="";if(typeof e=="string"){try{e=JSON.parse(e)}catch(s){i="Failed to parse JSON: "+s}}else if(typeof e!="object"){i="Expected an object or string. Got neither."}return this.each(function(){var t=$(this);t.empty();if(i){t.html(i)}else{o(t,e)}})};